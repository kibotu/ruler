image: ubuntu:22.04
jdk:
  - openjdk17
before_install:
  - curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
  - apt-get install -y nodejs
  - node --version
  - npm --version
  - echo "withoutSample=true" >> gradle.properties
  - sed -i 's/org.gradle.offline=true/org.gradle.offline=false/g' gradle.properties
  - echo "kotlin.js.nodejs.download=false" >> gradle.properties
install:
  - ./gradlew :ruler-models:publishJvmPublicationToMavenLocal :ruler-models:publishKotlinMultiplatformPublicationToMavenLocal :ruler-common:publishToMavenLocal :ruler-gradle-plugin:publishToMavenLocal -Pgroup=com.github.kibotu -Pversion=$VERSION